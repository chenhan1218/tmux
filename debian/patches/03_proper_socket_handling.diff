# setting /usr/bin/tmux with sgid and proper location of socket
Index: tmux/GNUmakefile
===================================================================
--- tmux.orig/GNUmakefile	2010-03-13 23:25:52.690727599 +0100
+++ tmux/GNUmakefile	2010-03-13 23:25:52.702716773 +0100
@@ -53,7 +53,7 @@
 
 PREFIX?= /usr/
 INSTALLDIR= install -d
-INSTALLBIN= install -g bin -o root -m 555
+INSTALLBIN= install -g utmp -o root -m 2755
 INSTALLMAN= install -g bin -o root -m 444
 
 SRCS= $(shell echo *.c|sed 's|osdep-[a-z0-9]*.c||g')
Index: tmux/Makefile
===================================================================
--- tmux.orig/Makefile	2010-03-13 23:25:52.690727599 +0100
+++ tmux/Makefile	2010-03-13 23:25:52.702716773 +0100
@@ -49,7 +49,7 @@
 
 PREFIX?= /usr
 INSTALLDIR= install -d
-INSTALLBIN= install -g bin -o root -m 555
+INSTALLBIN= install -g utmp -o root -m 2755
 INSTALLMAN= install -g bin -o root -m 444
 
 SRCS!= echo *.c|sed 's|osdep-[a-z0-9]*.c||g'
Index: tmux/compat.h
===================================================================
--- tmux.orig/compat.h	2010-03-13 23:23:19.942723618 +0100
+++ tmux/compat.h	2010-03-13 23:25:52.702716773 +0100
@@ -25,7 +25,7 @@
 
 #ifndef HAVE_PATHS_H
 #define	_PATH_BSHELL	"/bin/sh"
-#define	_PATH_TMP	"/tmp/"
+#define _PATH_VARRUN    "/var/run/"
 #define _PATH_DEVNULL	"/dev/null"
 #define _PATH_TTY	"/dev/tty"
 #define _PATH_DEV	"/dev/"
Index: tmux/tmux.c
===================================================================
--- tmux.orig/tmux.c	2010-03-13 23:23:19.930726062 +0100
+++ tmux/tmux.c	2010-03-13 23:26:33.182216363 +0100
@@ -189,7 +189,7 @@
 	u_int		uid;
 
 	uid = getuid();
-	xsnprintf(base, MAXPATHLEN, "%s/tmux-%d", _PATH_TMP, uid);
+	xsnprintf(base, MAXPATHLEN, "%s/%s/%s-%d", _PATH_VARRUN, __progname, __progname, uid);
 
 	if (mkdir(base, S_IRWXU) != 0 && errno != EEXIST)
 		return (NULL);
